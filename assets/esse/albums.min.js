function decorateCard(a){var t=a.data("bgimage"),o=a.data("bgpattern"),e=a.data("bgcolor");t?a.css({"background-image":"url("+t+")","background-size":"cover","background-position":"50%"}):o&&a.css({"background-image":"url("+o+")","background-repeat":"repeat"}),e&&a.css("background-color",e)}function projectEsseAlbums(a){var t,o,e,n,i,r,c=0,s=$('<div class="btn-next"><div class="arrow-next"></div></div>'),d={portraitRatio:.75,landscapeRatio:1.5,startMenu:!0,startAlbum:"auto"},a=$.extend(!0,{},d,a),l=function(){i=$(window).height();var a="scale("+(r=i-$("header").outerHeight()-$("footer").outerHeight())/3/n.height()+")";o.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a})},u=function(){var a=$(t[c]).clone();if(c++,a.hide().appendTo("main").fadeIn(800),t[c]){var e=s.clone();o.append(e),e.one("click",function(){var a=$(this).position().left+200;$(this).fadeOut().remove(),u(),$("#main-wrapper").animate({scrollLeft:a},"slow")})}},m=function(a){t=$('section[data-album="'+a+'"]'),c=0,$("body").removeClass("menu-active"),o.html(""),u()};$(document).ready(function(){var t=window.location.hash.substr(1);o=$("#main-wrapper > main"),e=$("#albums-menu li"),n=$(".grid-row > article"),$modal=$("#card-modal"),n.addClass("card-item"),n.not(".doublesided").each(function(){decorateCard($(this))}),l(),o.on("click",".card-item.thumbnail",function(){$modal.html($(this).clone()).fadeIn(),$modal.one("click",function(){$(this).fadeOut(500)})}),$("#menu-flag").on("click",function(){$("body").toggleClass("menu-active")}),e.on("click",function(){m($(this).data("album"))});var i,r;t?r=t:a.startAlbum&&(r=a.startAlbum),(i=$('li[data-album="'+r+'"]')).length?i.trigger("click"):"auto"==r&&$(e[0]).trigger("click"),a.startMenu&&$("body").addClass("menu-active")})}
